# -*- coding: utf-8 -*-
"""shampoo review app.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/17L-5StISQjTk6f6QEHD9ZS6iqF2Sg91I
"""

import streamlit as st
import joblib
import re
from nltk.tokenize import TreebankWordTokenizer
from nltk.corpus import stopwords
import nltk
nltk.download('stopwords')


import pickle

with open("sentiment_model.pkl", "rb") as f:
    model = pickle.load(f)

with open("vectorizer.pkl", "rb") as f:
    vectorizer = pickle.load(f)

# Preprocessing
tokenizer = TreebankWordTokenizer()
stop_words = set(stopwords.words("english"))

def clean_and_tokenize(text):
    text = text.lower()
    text = re.sub(r'[^a-z\s]', '', text)
    tokens = tokenizer.tokenize(text)
    filtered_tokens = [word for word in tokens if word not in stop_words]
    return " ".join(filtered_tokens)

# Streamlit app
st.title("Shampoo Sentiment Analysis")
review = st.text_area("Enter your shampoo review:")

if st.button("Analyze Sentiment"):
    if review.strip():
        cleaned_review = clean_and_tokenize(review)
        vec = vectorizer.transform([cleaned_review])
        prediction = model.predict(vec)[0]
        st.success(f"Predicted Sentiment: **{prediction}**")
    else:
        st.warning("Please enter a review to analyze.")
